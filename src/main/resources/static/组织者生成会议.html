<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>组织者生成会议</title>
    <!-- Common plugins -->
<!--    <link href="assets/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="assets/css/simple-line-icons.css" rel="stylesheet">-->
<!--    <link href="assets/css/font-awesome.min.css" rel="stylesheet">-->
<!--    <link href="assets/css/pace.css" rel="stylesheet">-->
<!--    <link href="assets/css/jasny-bootstrap.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="css/nanoscroller.css">-->
<!--    <link rel="stylesheet" href="css/metismenu.min.css">-->
<!--    <link href="css/c3.min.css" rel="stylesheet">-->
<!--    <link href="css/blue.css" rel="stylesheet">-->
<!--    &lt;!&ndash; dataTables &ndash;&gt;-->
<!--    <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">-->
<!--    <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">-->
<!--    <link href="css/jquery.toast.min.css" rel="stylesheet">-->
<!--    &lt;!&ndash;template css&ndash;&gt;-->
<!--    <link href="css/style.css" rel="stylesheet">-->
<!--    &lt;!&ndash; HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries &ndash;&gt;-->
<!--    &lt;!&ndash; WARNING: Respond.js doesn't work if you view the page via file:// &ndash;&gt;-->

<!--    <script src="js/html5shiv.min.js"></script>-->
<!--    <script src="js/respond.min.js"></script>-->
    <script src="js/bootstrap.min.js"></script>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/simple-line-icons.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/pace.css" rel="stylesheet">
    <link href="assets/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/nanoscroller.css">
    <link rel="stylesheet" href="css/metismenu.min.css">
    <link href="css/c3.min.css" rel="stylesheet">
    <link href="css/blue.css" rel="stylesheet">
    <!-- dataTables -->
    <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
    <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/jquery.toast.min.css" rel="stylesheet">
    <!--template css-->
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>


    <link href="会务管理系统样式1/css/bootstrap.min.css" rel="stylesheet">
    <link href="会务管理系统样式1/css/simple-line-icons.css" rel="stylesheet">
    <link href="会务管理系统样式1/css/font-awesome.min.css" rel="stylesheet">
    <link href="会务管理系统样式1/css/pace.css" rel="stylesheet">
    <link href="会务管理系统样式1/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="会务管理系统样式1/stylesheet" href="css/nanoscroller.css">
    <link rel="会务管理系统样式1/stylesheet" href="css/metismenu.min.css">
    <link href="会务管理系统样式1/css/c3.min.css" rel="stylesheet">
    <link href="会务管理系统样式1/css/blue.css" rel="stylesheet">
    <!-- dataTables -->
    <link href="会务管理系统样式1/css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
    <link href="会务管理系统样式1/css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="会务管理系统样式1/css/jquery.toast.min.css" rel="stylesheet">
    <!--template css-->
    <link href="会务管理系统样式1/css/style.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <script src="会务管理系统样式1/js/html5shiv.min.js"></script>
    <script src="会务管理系统样式1/js/respond.min.js"></script>

    <link rel="stylesheet" href="会务管理系统样式1/fonts/iconfont.css">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/simple-line-icons.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/pace.css" rel="stylesheet">
    <link href="assets/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/nanoscroller.css">
    <link rel="stylesheet" href="assets/css/metismenu.min.css">
    <link href="assets/css/c3.min.css" rel="stylesheet">
    <link href="assets/css/blue.css" rel="stylesheet">
    <!-- dataTables -->
    <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
    <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/jquery.toast.min.css" rel="stylesheet">
    <!--template css-->
    <link href="css/style.css" rel="stylesheet">
    HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    WARNING: Respond.js doesn't work if you view the page via file://
    <script src="js/html5shiv.min.js"></script>
    <script src="js/respond.min.js"></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <style type="text/css">
        *{
            margin: 0px;
            padding: 0px;
        }
        .container a .items{
            border: 1px solid#eeeeee;
            /* padding: 5px; */
            margin-bottom: 50px;
            background-color: #ffffff;
            box-shadow: 0px 0 16px rgba(0, 0, 0, 0.2);
        }
        .container a .items p {
            color: #6f6f6f;
            padding :0px 10px;
            margin: 0px;
        }
        .container a .items h4{
            padding :0px 10px;
            margin-top:10px;
            color: #666666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .container a:hover div{
            transform: scale(1.15);
            transition: all .65s;
            overflow: hidden;
        }
        .container a:hover h4{
            color: #00a0e9;
        }
        .container a p span{
            color :#d7d7d7;
        }
        .back-to-top {
            position: fixed;
            display: none;
            width: 40px;
            height: 40px;
            border-radius: 3px;
            right: 15px;
            bottom: 15px;
            background: #428bca;
            color: #ffffff;
            text-align: center;
            line-height: 40px;
            transition: display 0.5s ease-in-out;
            z-index: 99999;
        }
    </style>
    <script>

        //进来时显示个人信息
        $(function () {
            showOrganizer();

            $("#submit_head_photo").click(function () {
                var form = new FormData(document.getElementById("form_submit_photo"));//把表单的对象作为一个参数
                $.ajax({
                    type:"POST",
                    url:"/file/headPhotoUpload",
                    data:form,
                    headers:{"token": localStorage.conNCU},
                    dataType:"json",
                    processData:false,
                    contentType:false,
                    success:function(result) {
                        if (result.message == "成功") {
                            alert('更新头像成功!');
                        } else {
                            alert('更新头像失败!');
                        }
                    },
                    error:function() {
                        alert('更新异常!');
                    }
                });
            })
        })

        function showOrganizer(){
            $.ajax({
                type:"get",
                url: "/organizer/showOrganizerPersonal",
                data: "",
                dataType:"json",
                headers:{"token": localStorage.conNCU},
                processData:false,
                contentType:false,
                success:function (result) {
                    // console.dir(result);
                    $("#organizerId").val(result.data.organizerId);
                    $("#organizerPass").val(result.data.organizerPass);
                    $("#organizerPhone").val(result.data.organizerPhone);
                    $("#organizerUnit").val(result.data.organizerUnit);
                    $("#organizerEmail").val(result.data.organizerEmail);
                    $("#roleId").val(result.data.organizerId);
                    $("#head_photo").attr("src",result.data.organizerPhoto);
                    $("#nav-head-photo").attr("src",result.data.organizerPhoto);
                },
                error:function () {
                    alert('请求异常!');
                }
            })
        }

        function submitUpdateOrganizer(){
            var form = new FormData(document.getElementById("updateOrganizerForm"));//把表单的对象作为一个参数
            // console.dir(form);
            $.ajax({
                async: false,
                type:"post",
                url: "/organizer/updateOrganizer",
                data: form,
                headers:{"token": localStorage.conNCU},
                dataType:"json",
                processData:false,
                contentType:false,
                success:function (result) {
                    // console.dir(result);
                    if( result.message == "成功"){
                        alert("修改成功!");
                    }else {
                        alert("修改失败!");
                    }
                    showOrganizer();
                },
                error:function () {
                    alert("请求异常");
                }
            })
        }

        //预览图片
        function onLoadImage() {
            var file=$('#ingredient_file').get(0).files[0];
            var reader = new FileReader();
            //将文件以Data URL形式读入页面
            reader.readAsDataURL(file);
            reader.onload = function(e){
                //显示文件
                $(".head_photo_container").html('<img id="head_photo" class="img-responsive center-block" src="' + this.result +'" alt="" />');
            }
        }

    </script>
</head>
<body>

<!--top bar start-->
<div class="top-bar light-top-bar">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-4">
                <a href="organizer-index.html" class="admin-logo">
                    <h1><img src="assets/picture/meeting.jpg" alt=""></h1>
                </a>
                <!-- 以下div为页面缩小后出现左边导航栏的按钮  -->
                <div class="left-nav-toggle visible-xs visible-sm">
                    <a href="">
                        <i class="glyphicon glyphicon-menu-hamburger"></i>
                    </a>
                </div><!--end nav toggle icon-->
            </div>
            <!--以下div为顶部导航栏-->
            <div class="col-xs-8">
                <ul class="list-inline top-right-nav">

                    <li >
                        <a href="login.html" >
                            <span class="glyphicon glyphicon-log-out"> 退出登录</span>
                        </a>
                    </li>
                    <li>
                        <a href="组织者单位信息.html">
                            <img id = "nav-head-photo" src="" class="img-circle"  alt="" style = "width: 20px;">&nbsp;&nbsp;
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- top bar end-->

<!--左侧导航栏开始-->
<aside class="float-navigation light-navigation">
    <div class="nano">
        <div class="nano-content">
            <ul class="metisMenu nav" id="menu">
                <!--                        <li class="nav-heading"><span>Navigation</span></li>-->
                <li>
                    <a href="organizer-index.html"><i class="icon-home"></i> 主页 </a>
                </li>
                <li id="to-info">
                    <a href="组织者单位信息.html"><i class="icon-user"></i> 单位信息 </a>
                </li>
                <li class="active">
                    <a href="javascript: void(0);" aria-expanded="true"><i class="icon-note"></i> 会议 <span class="fa arrow"></span></a>
                    <ul class="nav-second-level nav" aria-expanded="true">
                        <li><a href="组织者生成会议.html">生成会议</a></li>
                        <li><a href="组织者查看会议.html">查看会议</a></li>
                        <li><a href="组织者审核会议.html">审核会议</a></li>
                    </ul>
                </li>

            </ul>
        </div><!--nano content-->
    </div><!--nano scroll end-->
</aside>
<!--左侧导航栏结束-->


<!--页面主体内容部分开始-->
<section class="main-content">
    <!--页面主体头部开始-->
    <div class="page-header">
        <div class="row">
            <!--面包屑导航-->
            <div class="col-sm-12 text-right">
                <ol class="breadcrumb">
                    <li><a href="javascript: void(0);"><i class="fa fa-home"></i></a></li>
                    <li>会议</li>
                    <li>生成会议</li>
                </ol>
            </div>
        </div>
    </div>
    <!--主体页面头部结束-->

    <!--页面主体内容部分开始-->
    <div class="page-wrapper">
        <div class="container-fluid">
            <!-- Row -->
            <div class="row">
                <!-- Column -->
                <div class="col-sm-11">
                    <div class="card">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs profile-tab" role="tablist">
                            <li class="nav-item " id="make-conference"> <a class="nav-link" data-toggle="tab" href="#生成会议" role="tab" onclick="showMethod()">
                                生成会议</a> </li>
                            <li class="nav-item " id="update-conference"> <a class="nav-link" data-toggle="tab" href="#修改会议"
                                                      role="tab" onclick="showMyConference()">修改会议</a> </li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div class="tab-pane" id="生成会议" role="tabpanel">
                                <div class="card-body">
                                    <form class="form-horizontal form-material">
                                        <br>
                                        <div class="form-group">
                                            <label class="col-md-12">会议名称</label>
                                            <div class="col-md-12">
                                                <input type="text" class="form-control form-control-line"
                                                       id="conferenceName">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-12">会议开始时间</label>
                                            <div class="col-md-12">
                                                <input type="text" class="form-control form-control-line"
                                                       id="conferenceStart" value="2020-12-20 15:00:00">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-12">会议结束时间</label>
                                            <div class="col-md-12">
                                                <input type="text" class="form-control form-control-line"
                                                       id="conferenceEnd" value="2020-12-25 15:00:00">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-12">会议地点</label>
                                            <div class="col-md-12">
                                                <input type="text" class="form-control form-control-line"
                                                       id="conferenceLocation" >
                                            </div>
                                        </div>
                                        <div id="choose-method">

                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-12">会议相关信息</label>
                                            <div class="col-md-12">
                                                    <textarea rows="5" class="form-control form-control-line"
                                                              id="conferenceInfo">
                                                </textarea>
                                            </div>
                                        </div>
                                        <br />
                                        <br />
                                        <div class="form-group">
                                            <div class="col-sm-12 text-center">
                                                <button  type="button" class="btn btn-info" onclick="check()">生成会议</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="tab-pane" id="修改会议" role="tabpanel">
                                <div class="container" id="myConference">


                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- Column -->
            </div>
            <!-- Row -->

        </div>
    </div>


    <!--页面主体内容部分结束-->


    <!--Start footer-->
    <footer class="footer">
        <span>Copyright &copy; 2020. 南昌大学</span>
    </footer>
    <!--end footer-->

</section>
<!--end main content-->



<!--Common plugins-->
<!--<script src="js/jquery.min.js"></script>-->
<script src="js/bootstrap.min.js"></script>
<!--<script src="js/pace.min.js"></script>-->
<!--<script src="js/jasny-bootstrap.min.js"></script>-->
<!--<script src="js/jquery.slimscroll.min.js"></script>-->
<!--<script src="js/jquery.nanoscroller.min.js"></script>-->
<!--<script src="js/metismenu.min.js"></script>-->
<!--<script src="js/float-custom.js"></script>-->
<!--&lt;!&ndash;page script&ndash;&gt;-->
<!--<script src="js/d3.min.js"></script>-->
<!--<script src="js/c3.min.js"></script>-->
<!--&lt;!&ndash; iCheck for radio and checkboxes &ndash;&gt;-->
<!--<script src="js/icheck.min.js"></script>-->
<!--&lt;!&ndash; Datatables&ndash;&gt;-->
<!--<script src="js/jquery.datatables.min.js"></script>-->
<!--<script src="js/datatables.responsive.min.js"></script>-->
<!--<script src="js/jquery.toast.min.js"></script>-->
<!--<script src="js/dashboard-alpha.js"></script>-->

<!--<script src="js/hotel/hotelindex.js"></script>-->
<!--<script src="js/fleet/fleet-index.js"></script>-->
<script src="js/organizer/organizer-index.js"></script>
<script src="makeConference.js"></script>
<script src="repairConference.js"></script>
<script type="text/javascript">
    $(function () {
        $("#make-conference a").click();
    })
    function check() {
        var start = document.getElementById("conferenceStart").value;
        var end = document.getElementById("conferenceEnd").value;
        var f=1;
        if(start>end){
            alert("会议起始时间不能大于会议结束时间！")
            f=0;
        }
        var   d=new Date(Date.parse(start.replace(/-/g,"/")));
        var   curDate=new  Date();
        if(d <curDate){
            alert("会议开始时间不能小于当前时间");
            f=0;
        }
        if(f==1){
            addConference();
        }
    }
</script>
</body>
</html>