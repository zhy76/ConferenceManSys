
<!doctype html>
<html  lang="en">

    <head>
        <!-- meta data -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <!--font-family-->
		<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">
        
        <!-- title of site -->
        <title>Sign in</title>

        <!-- For favicon png -->
		<link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>
       
        <!--font-awesome.min.css-->
        <link rel="stylesheet" href="assets/css/font-awesome.min.css">
		
		<!--animate.css-->
        <link rel="stylesheet" href="assets/css/animate.css">
		
        <!--bootstrap.min.css-->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
		
		<!-- bootsnav -->
		<link rel="stylesheet" href="assets/css/bootsnav.css" >	
        
        <!--style.css-->
        <link rel="stylesheet" href="assets/css/style.css">
        
        <!--responsive.css-->
        <link rel="stylesheet" href="assets/css/responsive.css">
        
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		
        <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>
	
	<body>
		<!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->
		
		<!-- signin end -->
		<section class="signin signup">
			<div class="container">
				<div class="sign-content popup-in-content">
					<div class="popup-in-txt">
						<h2>sign in</h2>

<!--						<div class="row">-->
<!--							<div class="col-sm-6">-->
								<div class="signin-form">
									<form action="popupsignin.html" role="form">
										<div class="form-group">
											<label for="signin_form"><span class="glyphicon glyphicon-user" style="color: rgb(140, 132, 251);"></span>  role</label>
											<!--										    <input type="text" class="form-control" id="signin_form" placeholder="Role">-->
											<select  class="form-control" id="signin_form" required>
												<option value="participant">meeting participant</option>
												<option value="organizer">meeting organizer</option>
												<option value="administrator">administrator</option>
												<option value="driver">driver</option>
												<option value="hotel">hotel</option>
											</select>
										</div><!--/.form-group -->
										<div class="form-group">
										    <label for="signin_form"> <span class="glyphicon glyphicon-phone" style="color: rgb(140, 132, 251);"></span>  phone number</label>
										    <input type="text" class="form-control" id="phoneNumber" placeholder="Enter your phone number" required>
										</div><!--/.form-group -->
										<div class="form-group">
											<label  for="signin_form"><span class="glyphicon glyphicon-lock" style="color: rgb(140, 132, 251);"></span>  passward</label>
										    <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
										</div><!--/.form-group -->
									</form><!--/form -->
								</div><!--/.signin-form -->
<!--							</div>&lt;!&ndash;/.col &ndash;&gt;-->
<!--						</div>&lt;!&ndash;/.row &ndash;&gt;-->
						<form role="form">
							<div class="row">
								<div class="col-sm-12">
									<div class="signin-password">
<!--										<div class="password-circle">-->
											<div class="checkbox pull-left">
												<label>
													<input type="checkbox"> remember me
												</label>
											</div>
											<!--										<div class="single-password-circle">-->
											<!--											<input type="checkbox" id="checkbox01" name="remember">-->
											<!--												<label for="checkbox01">-->
											<!--													<span class="round-boarder">-->
											<!--														<span class="round-boarder1"></span>-->
											<!--													</span>remember me-->
											<!--												</label>-->
											<!--										</div>&lt;!&ndash;/.single-password-circle&ndash;&gt;-->
											<div class="single-forgot-password-circle pull-right">
												<a href="popupsignin.html">Forgot password</a>
											</div><!--/.single-password-circle-->
<!--										</div>&lt;!&ndash;/.password-circle&ndash;&gt;-->
									</div><!--/.signin-password -->
								</div><!--/.col -->
								<div class="col-sm-12">
									<div class="signin-footer">
										<button type="button" id="submit" class="btn signin_btn signin_btn_two" data-toggle="modal" data-target=".signin_modal">
											sign in
										</button>
										<p>
											Don’t have an Account ?
											<a href="popupsignup.html">Sign up</a>
										</p>
									</div><!--/.signin-footer -->
								</div><!--/.col -->
							</div><!--/.row -->
<!--							</div>&lt;!&ndash;/.row &ndash;&gt;-->

<!--							<div class="row">-->

						</form>

					</div><!-- .popup-in-txt -->
				</div><!--/.sign-content -->
			</div><!--/.container -->
		</section><!--/.signin -->
		
		<!-- signin end -->

		<!--footer copyright start -->
		<footer class="footer-copyright">
			<div >
				<i class="fa fa-angle-double-up return-to-top"  data-toggle="tooltip" data-placement="top" title="" data-original-title="Back to Top" aria-hidden="true"></i>
			</div><!--/.scroll-Top-->

		</footer><!--/.hm-footer-copyright-->
		<!--footer copyright  end -->


		 <!-- Include all js compiled plugins (below), or include individual files as needed -->

		<script src="assets/js/jquery.js"></script>
        
        <!--modernizr.min.js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
		
		<!--bootstrap.min.js-->
        <script src="assets/js/bootstrap.min.js"></script>
		
		<!-- bootsnav js -->
		<script src="assets/js/bootsnav.js"></script>
		
		<!-- jquery.sticky.js -->
		<script src="assets/js/jquery.sticky.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
		
        
        <!--Custom JS-->
        <script src="assets/js/custom.js"></script>


		<!-- 配置json解析，将登陆信息发送给/login -->
		<script src="js/jquery-3.1.1.min.js"></script>
		<script>
			function parseJwt(token) {
				var base64Url = token.split('.')[1];
				var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
				var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
					return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
				}).join(''));

				return JSON.parse(jsonPayload);
			}
		</script>
		<script type="text/javascript">
			$("#submit").click(function () {
				var username = $("#phoneNumber").val();
				var password = $("#password").val();
				$.ajax({
					type: "POST",
					dataType: "json",
					url: '/participant/login',
					contentType: "application/json",
					data: JSON.stringify({
						"participantPhone": "" + username,
						"participantPass": "" + password
					}),
					success: function (jsonData, result) {
						console.log("data is :" + result)
						if (jsonData["token"]) {
							localStorage.setItem("bbsNCU", jsonData["token"]);
							if (parseJwt(jsonData["token"]).type == 2) {
								window.location.href = "admin.html"
							} else {
								window.location.href = "index.html";
							}

						} else {
							alert("登录失败，请重试");
						}
					}
				});
			})

		</script>

    </body>
	
</html>